# Использование сайта
____
### [Перейти на сайт](http://mentols.pythonanywhere.com/api/v1/) или ```http://mentols.pythonanywhere.com/api/v1/``` 

## Для авторизации:
1. Перейти на [адрес](http://mentols.pythonanywhere.com/admin/) `http://mentols.pythonanywhere.com/admin`
2.   - Ввести логин:`admin`
     - Ввести пароль:`1111`

| url | Auth User | Anonimus User |
|----------------|:----------------|:---------|
| ```/admin``` | ✅ | ❌ |
| ```/api/v1/``` | ✅ | ✅ |
| ```/api/v1/basket ```| ✅ | ❌ |
| ```/api/v1/cancel``` | ✅ | ✅ |
| ```/api/v1/success ```| ✅ | ✅ |

- ### Неавторизованный пользователь может:
  - Покупать товары находящиейся на главной странице
- ### Авторизованный пользователь может:
  - Покупать товары находящиейся на главной странице
  - Добалвять товары в коризну ```Order```
  - Удалять товары и коризны ```Order```
  - Покупать несколько товаров в одном платеже ```Order```

### Дополнительные возможности в панели администратора:
 - Добавить товар[`Item`]
 - Добавить скидку[`Discount`] 
 - Добавить налог[`Tax`]

> ### Для корректной работы программы не можеть быть больше одного уникального товара в коризине`Order`!
> ### Также один заказ может иметь иметь только одну скидку`Discount` и один налог`Tax` (могут быть вместе)
____
# Как запустить проект на вышей локальной машине:
1. Установить Docker  https://docs.docker.com/engine/install/
2. Ввести следующие команды: 
```
  git clone https://github.com/mentols/stripe_payment.git 
  cd stripe_payment
  python3 -m venv env
  . ./env/bin/activate
  docker-compose up --build
```
3. Перейти по адресу 127.0.0.0:8000
4. Остановка контейнера  `ctr + C`
____
# Пути проекта
- `/api/v1/` – список всех товаров
- `/api/v1/basket/` – корзина 
- `/api/v1/cancel/` – успешная оплата
- `/api/v1/success/` – отмена оплаты
- `/api/v1/buy/<int:pk>/` – создание сесссии для покупки товара
- `/api/v1/buy_order/<int:pk>/` – создание сессии для покупки корзины
____
# Схема базы данных
![схема бд](https://github.com/mentols/stripe_payment/img/db_struct.png)
